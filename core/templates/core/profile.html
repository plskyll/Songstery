<!-- ========================================
–§–ê–ô–õ 1: core/templates/core/book_detail.html
======================================== -->

{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/book_detail.css' %}">
{% endblock %}

{% block content %}
<div class="book-detail-container">
    <!-- –•–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏ -->
    <div class="breadcrumbs">
        <a href="{% url 'core:home' %}">–ì–æ–ª–æ–≤–Ω–∞</a> / {{ book.title }}
    </div>

    <!-- –®–∞–ø–∫–∞ –∫–Ω–∏–≥–∏ -->
    <div class="book-header">
        <div class="book-cover-large">
            {% if book.cover_url %}
                <img src="{{ book.cover_url }}" alt="{{ book.title }}">
            {% else %}
                <div class="no-cover">üìö</div>
            {% endif %}
        </div>

        <div class="book-info">
            <h1>{{ book.title }}</h1>
            <h2 class="author">{{ book.author }}</h2>
            <p class="meta">
                <span>{{ book.year }}</span>
                {% if book.genre %}
                    <span>‚Ä¢ {{ book.genre }}</span>
                {% endif %}
                <span>‚Ä¢ üëÅ {{ book.views_count }} –ø–µ—Ä–µ–≥–ª—è–¥—ñ–≤</span>
            </p>

            {% if book.description %}
                <p class="description">{{ book.description }}</p>
            {% endif %}

            <div class="actions">
                {% if user.is_authenticated %}
                    <a href="{% url 'core:save_book' book.id %}" class="btn-primary">
                        {% if is_saved %}
                            üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–æ
                        {% else %}
                            üìö –ó–±–µ—Ä–µ–≥—Ç–∏ –∫–Ω–∏–≥—É
                        {% endif %}
                    </a>
                    <a href="{% url 'core:create_playlist' book.id %}" class="btn-secondary">
                        üéµ –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–ª–µ–π–ª–∏—Å—Ç
                    </a>
                {% else %}
                    <a href="/admin/login/?next={{ request.path }}" class="btn-primary">
                        –£–≤—ñ–π—Ç–∏ —â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏
                    </a>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- –†–æ–∑–¥—ñ–ª–∏ -->
    {% if chapters %}
    <section class="chapters-section">
        <h2>üìñ –†–æ–∑–¥—ñ–ª–∏ –∫–Ω–∏–≥–∏</h2>
        <div class="chapters-list">
            {% for chapter in chapters %}
            <a href="{% url 'core:chapter_detail' book.id chapter.number %}"
               class="chapter-card">
                <div class="chapter-number">{{ chapter.number }}</div>
                <div class="chapter-info">
                    <h3>{{ chapter.title }}</h3>
                    {% if chapter.description %}
                        <p class="chapter-desc">{{ chapter.description|truncatewords:20 }}</p>
                    {% endif %}
                    {% if chapter.mood_tags %}
                        <div class="mood-tags">{{ chapter.mood_tags }}</div>
                    {% endif %}
                </div>
                <div class="chapter-stats">
                    üéµ {{ chapter.music_recommendations.count }} —Ç—Ä–µ–∫—ñ–≤
                </div>
            </a>
            {% endfor %}
        </div>
    </section>
    {% else %}
        <div class="empty-state">
            <p>üìñ –†–æ–∑–¥—ñ–ª–∏ —â–µ –Ω–µ –¥–æ–¥–∞–Ω—ñ. –î–æ–¥–∞–π—Ç–µ —ó—Ö –≤ –∞–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—ñ!</p>
        </div>
    {% endif %}

    <!-- –¢–æ–ø –º—É–∑–∏–∫–∞ -->
    {% if top_music %}
    <section class="top-music-section">
        <h2>üéµ –¢–æ–ø –º—É–∑–∏—á–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π</h2>
        <div class="music-list-compact">
            {% for music in top_music %}
            <div class="music-item-compact">
                <div class="music-info">
                    <h4>{{ music.track_title }}</h4>
                    <p>{{ music.artist }} ‚Ä¢ –†–æ–∑–¥—ñ–ª {{ music.chapter.number }}</p>
                </div>
                <div class="music-stats">
                    <span>‚ù§Ô∏è {{ music.likes_count }}</span>
                    <a href="{{ music.link_url }}" target="_blank" class="btn-link">–°–ª—É—Ö–∞—Ç–∏</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </section>
    {% endif %}

    <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ñ –ø–ª–µ–π–ª–∏—Å—Ç–∏ -->
    {% if popular_playlists %}
    <section class="playlists-section">
        <h2>üéº –ü–æ–ø—É–ª—è—Ä–Ω—ñ –ø–ª–µ–π–ª–∏—Å—Ç–∏</h2>
        <div class="playlists-grid">
            {% for playlist in popular_playlists %}
            <a href="{% url 'core:playlist_detail' playlist.pk %}" class="playlist-card">
                <h3>{{ playlist.title }}</h3>
                <p>{{ playlist.description|truncatewords:15 }}</p>
                <div class="playlist-meta">
                    <span>üë§ {{ playlist.creator.username }}</span>
                    <span>‚ù§Ô∏è {{ playlist.likes_count }}</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </section>
    {% endif %}
</div>
{% endblock %}


<!-- ========================================
–§–ê–ô–õ 2: core/templates/core/chapter_detail.html
======================================== -->

{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/chapter_detail.css' %}">
{% endblock %}

{% block content %}
<div class="chapter-detail">
    <!-- –•–ª—ñ–±–Ω—ñ –∫—Ä–∏—Ö—Ç–∏ -->
    <div class="breadcrumbs">
        <a href="{% url 'core:home' %}">–ì–æ–ª–æ–≤–Ω–∞</a> /
        <a href="{% url 'core:book_detail' chapter.book.id %}">{{ chapter.book.title }}</a> /
        –†–æ–∑–¥—ñ–ª {{ chapter.number }}
    </div>

    <!-- –Ü–Ω—Ñ–æ –ø—Ä–æ —Ä–æ–∑–¥—ñ–ª -->
    <div class="chapter-header">
        <h1>–†–æ–∑–¥—ñ–ª {{ chapter.number }}: {{ chapter.title }}</h1>
        {% if chapter.description %}
            <p class="chapter-desc">{{ chapter.description }}</p>
        {% endif %}
        {% if chapter.mood_tags %}
            <div class="mood-tags-large">
                <span class="tag-label">–ù–∞—Å—Ç—Ä—ñ–π:</span>
                {{ chapter.mood_tags }}
            </div>
        {% endif %}
    </div>

    <!-- –ù–∞–≤—ñ–≥–∞—Ü—ñ—è -->
    <div class="chapter-navigation">
        {% if prev_chapter %}
            <a href="{% url 'core:chapter_detail' chapter.book.id prev_chapter.number %}"
               class="btn-nav prev">
                ‚Üê –†–æ–∑–¥—ñ–ª {{ prev_chapter.number }}
            </a>
        {% endif %}

        <a href="{% url 'core:book_detail' chapter.book.id %}" class="btn-nav back">
            üìö –ù–∞–∑–∞–¥ –¥–æ –∫–Ω–∏–≥–∏
        </a>

        {% if next_chapter %}
            <a href="{% url 'core:chapter_detail' chapter.book.id next_chapter.number %}"
               class="btn-nav next">
                –†–æ–∑–¥—ñ–ª {{ next_chapter.number }} ‚Üí
            </a>
        {% endif %}
    </div>

    <!-- –ú—É–∑–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó -->
    <section class="music-section">
        <div class="section-header">
            <h2>üéµ –ú—É–∑–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</h2>
            {% if user.is_authenticated %}
                <a href="{% url 'core:add_music' chapter.id %}" class="btn-add">
                    + –î–æ–¥–∞—Ç–∏ –º—É–∑–∏–∫—É
                </a>
            {% else %}
                <a href="/admin/login/?next={{ request.path }}" class="btn-add">
                    –£–≤—ñ–π—Ç–∏ —â–æ–± –¥–æ–¥–∞—Ç–∏
                </a>
            {% endif %}
        </div>

        <div class="music-list">
            {% for music in music_recommendations %}
            <div class="music-item">
                <!-- YouTube embed -->
                {% if music.embed_code and music.link_type == 'youtube' %}
                <div class="music-player">
                    <iframe
                        width="100%"
                        height="200"
                        src="https://www.youtube.com/embed/{{ music.embed_code }}"
                        frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                        allowfullscreen>
                    </iframe>
                </div>
                {% endif %}

                <div class="music-content">
                    <div class="music-info">
                        <h3>{{ music.track_title }}</h3>
                        <p class="artist">{{ music.artist }}</p>

                        {% if music.comment %}
                            <p class="comment">üí≠ {{ music.comment }}</p>
                        {% endif %}

                        <div class="music-meta">
                            <span>üë§ {{ music.user.username }}</span>
                            <span>üìÖ {{ music.created_at|date:"d.m.Y" }}</span>
                            <a href="{{ music.link_url }}" target="_blank" class="link">
                                üîó –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ {{ music.get_link_type_display }}
                            </a>
                        </div>
                    </div>

                    <div class="music-actions">
                        {% if user.is_authenticated %}
                            <a href="{% url 'core:like_music' music.id %}"
                               class="btn-like {% if music.id in liked_music_ids %}liked{% endif %}">
                                ‚ù§Ô∏è {{ music.likes_count }}
                            </a>

                            {% if music.user == user or user.is_staff %}
                                <a href="{% url 'core:delete_music' music.id %}"
                                   class="btn-delete"
                                   onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏ —Ü—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é?')">
                                    üóëÔ∏è
                                </a>
                            {% endif %}
                        {% else %}
                            <span class="likes">‚ù§Ô∏è {{ music.likes_count }}</span>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="empty-state">
                <p>üéµ –ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –º—É–∑–∏—á–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π.</p>
                {% if user.is_authenticated %}
                    <p>–ë—É–¥—å –ø–µ—Ä—à–∏–º —Ö—Ç–æ –¥–æ–¥–∞—Å—Ç—å!</p>
                    <a href="{% url 'core:add_music' chapter.id %}" class="btn-primary">
                        –î–æ–¥–∞—Ç–∏ –º—É–∑–∏–∫—É
                    </a>
                {% endif %}
            </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}


<!-- ========================================
–§–ê–ô–õ 3: core/templates/core/add_music.html
======================================== -->

{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/forms.css' %}">
{% endblock %}

{% block content %}
<div class="form-container">
    <div class="breadcrumbs">
        <a href="{% url 'core:home' %}">–ì–æ–ª–æ–≤–Ω–∞</a> /
        <a href="{% url 'core:book_detail' chapter.book.id %}">{{ chapter.book.title }}</a> /
        <a href="{% url 'core:chapter_detail' chapter.book.id chapter.number %}">–†–æ–∑–¥—ñ–ª {{ chapter.number }}</a> /
        –î–æ–¥–∞—Ç–∏ –º—É–∑–∏–∫—É
    </div>

    <div class="form-box">
        <h1>üéµ –î–æ–¥–∞—Ç–∏ –º—É–∑–∏—á–Ω—É —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é</h1>
        <p class="form-subtitle">
            –î–æ —Ä–æ–∑–¥—ñ–ª—É "{{ chapter.title }}" –∫–Ω–∏–≥–∏ "{{ chapter.book.title }}"
        </p>

        <form method="post" class="music-form">
            {% csrf_token %}

            <div class="form-group">
                <label for="{{ form.track_title.id_for_label }}">–ù–∞–∑–≤–∞ —Ç—Ä–µ–∫—É *</label>
                {{ form.track_title }}
                {% if form.track_title.errors %}
                    <span class="error">{{ form.track_title.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.artist.id_for_label }}">–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å *</label>
                {{ form.artist }}
                {% if form.artist.errors %}
                    <span class="error">{{ form.artist.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.link_type.id_for_label }}">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ *</label>
                {{ form.link_type }}
            </div>

            <div class="form-group">
                <label for="{{ form.link_url.id_for_label }}">–ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç—Ä–µ–∫ *</label>
                {{ form.link_url }}
                <small>–ü–æ–≤–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —Ç—Ä–µ–∫ (https://...)</small>
                {% if form.link_url.errors %}
                    <span class="error">{{ form.link_url.errors }}</span>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.embed_code.id_for_label }}">YouTube ID (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</label>
                {{ form.embed_code }}
                <small>–î–ª—è YouTube: —Ç—ñ–ª—å–∫–∏ ID –≤—ñ–¥–µ–æ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: dQw4w9WgXcQ)</small>
            </div>

            <div class="form-group">
                <label for="{{ form.comment.id_for_label }}">–ß–æ–º—É —Å–∞–º–µ —Ü—è –º—É–∑–∏–∫–∞?</label>
                {{ form.comment }}
                <small>–†–æ–∑–∫–∞–∂—ñ—Ç—å, —á–æ–º—É —Ü—è –º—É–∑–∏–∫–∞ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–æ —Ü—å–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É</small>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary">–î–æ–¥–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—é</button>
                <a href="{% url 'core:chapter_detail' chapter.book.id chapter.number %}"
                   class="btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}


<!-- ========================================
–§–ê–ô–õ 4: core/templates/core/create_playlist.html
======================================== -->

{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/forms.css' %}">
{% endblock %}

{% block content %}
<div class="form-container">
    <div class="breadcrumbs">
        <a href="{% url 'core:home' %}">–ì–æ–ª–æ–≤–Ω–∞</a> /
        <a href="{% url 'core:book_detail' book.id %}">{{ book.title }}</a> /
        –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–ª–µ–π–ª–∏—Å—Ç
    </div>

    <div class="form-box">
        <h1>üéº –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–ª–µ–π–ª–∏—Å—Ç</h1>
        <p class="form-subtitle">–î–ª—è –∫–Ω–∏–≥–∏ "{{ book.title }}"</p>

        <form method="post" class="playlist-form">
            {% csrf_token %}

            <div class="form-group">
                <label for="{{ form.title.id_for_label }}">–ù–∞–∑–≤–∞ –ø–ª–µ–π–ª–∏—Å—Ç–∞ *</label>
                {{ form.title }}
            </div>

            <div class="form-group">
                <label for="{{ form.description.id_for_label }}">–û–ø–∏—Å</label>
                {{ form.description }}
            </div>

            <div class="form-group">
                <label for="chapter_id">–î–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)</label>
                <select name="chapter_id" id="chapter_id" class="form-select">
                    <option value="">–î–ª—è –≤—Å—ñ—î—ó –∫–Ω–∏–≥–∏</option>
                    {% for chapter in chapters %}
                        <option value="{{ chapter.id }}">
                            –†–æ–∑–¥—ñ–ª {{ chapter.number }}: {{ chapter.title }}
                        </option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group">
                <label for="{{ form.mood.id_for_label }}">–ù–∞—Å—Ç—Ä—ñ–π</label>
                {{ form.mood }}
            </div>

            <div class="form-group checkbox">
                {{ form.is_public }}
                <label for="{{ form.is_public.id_for_label }}">–ó—Ä–æ–±–∏—Ç–∏ –ø—É–±–ª—ñ—á–Ω–∏–º</label>
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-primary">–°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–ª–µ–π–ª–∏—Å—Ç</button>
                <a href="{% url 'core:book_detail' book.id %}" class="btn-secondary">–°–∫–∞—Å—É–≤–∞—Ç–∏</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}


<!-- ========================================
–§–ê–ô–õ 5: core/templates/core/playlist_detail.html
======================================== -->

{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/playlist.css' %}">
{% endblock %}

{% block content %}
<div class="playlist-detail">
    <div class="breadcrumbs">
        <a href="{% url 'core:home' %}">–ì–æ–ª–æ–≤–Ω–∞</a> /
        <a href="{% url 'core:book_detail' playlist.book.id %}">{{ playlist.book.title }}</a> /
        –ü–ª–µ–π–ª–∏—Å—Ç
    </div>

    <div class="playlist-header">
        <div class="playlist-cover">üéº</div>
        <div class="playlist-info">
            <h1>{{ playlist.title }}</h1>
            <p class="creator">–°—Ç–≤–æ—Ä–∏–≤: {{ playlist.creator.username }}</p>

            {% if playlist.description %}
                <p class="description">{{ playlist.description }}</p>
            {% endif %}

            {% if playlist.mood %}
                <div class="mood">–ù–∞—Å—Ç—Ä—ñ–π: {{ playlist.mood }}</div>
            {% endif %}

            <div class="playlist-meta">
                <span>‚ù§Ô∏è {{ playlist.likes_count }} –ª–∞–π–∫—ñ–≤</span>
                <span>üìÖ {{ playlist.created_at|date:"d.m.Y" }}</span>
            </div>

            {% if user.is_authenticated %}
                <a href="{% url 'core:like_playlist' playlist.id %}"
                   class="btn-like {% if is_liked %}liked{% endif %}">
                    {% if is_liked %}‚ù§Ô∏è –í–ø–æ–¥–æ–±–∞–Ω–æ{% else %}ü§ç –í–ø–æ–¥–æ–±–∞—Ç–∏{% endif %}
                </a>
            {% endif %}
        </div>
    </div>

    <section class="tracks-section">
        <h2>–¢—Ä–µ–∫–∏</h2>
        {% if tracks %}
            <div class="tracks-list">
                {% for track in tracks %}
                <div class="track-item">
                    <span class="track-number">{{ forloop.counter }}</span>
                    <div class="track-info">
                        <h3>{{ track.track_title }}</h3>
                        <p>{{ track.artist }}</p>
                    </div>
                    <a href="{{ track.link_url }}" target="_blank" class="btn-play">‚ñ∂</a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <p class="empty-state">–¢—Ä–µ–∫–∏ —â–µ –Ω–µ –¥–æ–¥–∞–Ω—ñ</p>
        {% endif %}
    </section>
</div>
{% endblock %}


<!-- ========================================
–§–ê–ô–õ 6: core/templates/core/profile.html
======================================== -->

{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'core/css/profile.css' %}">
{% endblock %}

{% block content %}
<div class="profile-container">
    <h1>üë§ –ú—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å</h1>
    <p class="username">{{ user.username }}</p>

    <div class="profile-tabs">
        <button class="tab active" onclick="showTab('saved')">
            üìö –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –∫–Ω–∏–≥–∏ ({{ saved_books.count }})
        </button>
        <button class="tab" onclick="showTab('playlists')">
            üéº –ú–æ—ó –ø–ª–µ–π–ª–∏—Å—Ç–∏ ({{ my_playlists.count }})
        </button>
        <button class="tab" onclick="showTab('music')">
            üéµ –ú–æ—ó —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó ({{ my_recommendations.count }})
        </button>
    </div>

    <!-- –ó–±–µ—Ä–µ–∂–µ–Ω—ñ –∫–Ω–∏–≥–∏ -->
    <div id="saved-tab" class="tab-content active">
        <h2>–ó–±–µ—Ä–µ–∂–µ–Ω—ñ –∫–Ω–∏–≥–∏</h2>
        <div class="books-grid">
            {% for saved in saved_books %}
            <a href="{% url 'core:book_detail' saved.book.id %}" class="book-card">
                <img src="{{ saved.book.cover_url }}" alt="{{ saved.book.title }}">
                <h3>{{ saved.book.title }}</h3>
                <p>{{ saved.book.author }}</p>
            </a>
            {% empty %}
            <p class="empty">–£ –≤–∞—Å –ø–æ–∫–∏ –Ω–µ–º–∞—î –∑–±–µ—Ä–µ–∂–µ–Ω–∏—Ö –∫–Ω–∏–≥</p>
            {% endfor %}
        </div>
    </div>

    <!-- –ú–æ—ó –ø–ª–µ–π–ª–∏—Å—Ç–∏ -->
    <div id="playlists-tab" class="tab-content">
        <h2>–ú–æ—ó –ø–ª–µ–π–ª–∏—Å—Ç–∏</h2>
        <div class="playlists-list">
            {% for playlist in my_playlists %}
            <a href="{% url 'core:playlist_detail' playlist.id %}" class="playlist-item">
                <h3>{{ playlist.title }}</h3>
                <p>{{ playlist.book.title }}</p>
                <span>‚ù§Ô∏è {{ playlist.likes_count }}</span>
            </a>
            {% empty %}
            <p class="empty">–í–∏ —â–µ –Ω–µ —Å—Ç–≤–æ—Ä–∏–ª–∏ –∂–æ–¥–Ω–æ–≥–æ –ø–ª–µ–π–ª–∏—Å—Ç–∞</p>
            {% endfor %}
        </div>
    </div>

    <!-- –ú–æ—ó —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó -->
    <div id="music-tab" class="tab-content">
        <h2>–ú–æ—ó –º—É–∑–∏—á–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</h2>
        <div class="music-list">
            {% for music in my_recommendations %}
            <div class="music-item">
                <h3>{{ music.track_title }}</h3>
                <p>{{ music.artist }}</p>
                <p class="book-info">
                    {{ music.chapter.book.title }} - –†–æ–∑–¥—ñ–ª {{ music.chapter.number }}
                </p>
                <span>‚ù§Ô∏è {{ music.likes_count }}</span>
            </div>
            {% empty %}
            <p class="empty">–í–∏ —â–µ –Ω–µ –¥–æ–¥–∞–ª–∏ –∂–æ–¥–Ω–æ—ó —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó</p>
            {% endfor %}
        </div>
    </div>
</div>

<script>
function showTab(tabName) {
    // –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ –≤—Å—ñ —Ç–∞–±–∏
    document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
    });
    document.querySelectorAll('.tab').forEach(btn => {
        btn.classList.remove('active');
    });

    // –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ç–∞–±
    document.getElementById(tabName + '-tab').classList.add('active');
    event.target.classList.add('active');
}
</script>
{% endblock %}